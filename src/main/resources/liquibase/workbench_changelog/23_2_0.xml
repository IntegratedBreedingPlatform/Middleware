<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
				   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
				   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
		http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">
	<changeSet author="cuenyad" id="v23.2.0-1">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'CREATE_STUDIES';
             </sqlCheck>
 		</preConditions>
		<comment>Create Studies permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @mg_studies_permission_id = (SELECT permission_id FROM permission WHERE name = 'MANAGE_STUDIES');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('CREATE_STUDIES', 'Create Studies', @mg_studies_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'CREATE_STUDIES');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-2">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'CLOSE_STUDY';
             </sqlCheck>
 		</preConditions>
		<comment>Close Study permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @mg_studies_permission_id = (SELECT permission_id FROM permission WHERE name = 'MANAGE_STUDIES');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('CLOSE_STUDY', 'Close Study', @mg_studies_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'CLOSE_STUDY');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-3">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'DELETE_STUDY';
             </sqlCheck>
 		</preConditions>
		<comment>Delete Study permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @mg_studies_permission_id = (SELECT permission_id FROM permission WHERE name = 'MANAGE_STUDIES');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('DELETE_STUDY', 'Delete Study', @mg_studies_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'DELETE_STUDY');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-4">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'LOCK_STUDY';
             </sqlCheck>
 		</preConditions>
		<comment>Lock Study permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @mg_studies_permission_id = (SELECT permission_id FROM permission WHERE name = 'MANAGE_STUDIES');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('LOCK_STUDY', 'Lock Study', @mg_studies_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'LOCK_STUDY');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-5">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_GERMPLASM_AND_CHECKS';
             </sqlCheck>
 		</preConditions>
		<comment>Germplasm and Checks permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @mg_studies_permission_id = (SELECT permission_id FROM permission WHERE name = 'MANAGE_STUDIES');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_GERMPLASM_AND_CHECKS', 'Germplasm and Checks', @mg_studies_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_GERMPLASM_AND_CHECKS');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-6">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_VIEW_GERMPLASM_AND_CHECKS';
             </sqlCheck>
 		</preConditions>
		<comment>View Germplasm and Checks permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @ms_germplasm_and_checks_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_GERMPLASM_AND_CHECKS');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_VIEW_GERMPLASM_AND_CHECKS', 'View Germplasm and Checks', @ms_germplasm_and_checks_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_VIEW_GERMPLASM_AND_CHECKS');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-7">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_ADD_ENTRY_DETAILS_VARIABLES';
             </sqlCheck>
 		</preConditions>
		<comment>Add Entry Details Variables permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @ms_germplasm_and_checks_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_GERMPLASM_AND_CHECKS');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_ADD_ENTRY_DETAILS_VARIABLES', 'Add Entry Details Variables', @ms_germplasm_and_checks_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_ADD_ENTRY_DETAILS_VARIABLES');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-8">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_MODIFY_ENTRY_DETAILS_VALUES';
             </sqlCheck>
 		</preConditions>
		<comment>Modify Entry Details Values permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @ms_germplasm_and_checks_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_GERMPLASM_AND_CHECKS');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_MODIFY_ENTRY_DETAILS_VALUES', 'Modify Entry Details Values', @ms_germplasm_and_checks_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_MODIFY_ENTRY_DETAILS_VALUES');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-9">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_MODIFY_COLUMNS';
             </sqlCheck>
 		</preConditions>
        <comment>Modify Columns permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @ms_germplasm_and_checks_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_GERMPLASM_AND_CHECKS');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_MODIFY_COLUMNS', 'Modify Columns', @ms_germplasm_and_checks_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_MODIFY_COLUMNS');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-10">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_REPLACE_GERMPLASM';
             </sqlCheck>
 		</preConditions>
		<comment>Replace Germplasm permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @ms_germplasm_and_checks_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_GERMPLASM_AND_CHECKS');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_REPLACE_GERMPLASM', 'Replace Germplasm', @ms_germplasm_and_checks_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_REPLACE_GERMPLASM');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-11">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_ADD_NEW_ENTRIES';
             </sqlCheck>
 		</preConditions>
		<comment>Add New Entries permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @ms_germplasm_and_checks_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_GERMPLASM_AND_CHECKS');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_ADD_NEW_ENTRIES', 'Add New Entries', @ms_germplasm_and_checks_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_ADD_NEW_ENTRIES');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-12">
		<preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_IMPORT_ENTRY_DETAILS';
             </sqlCheck>
 		</preConditions>
        <comment>Add New Entries permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @ms_germplasm_and_checks_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_GERMPLASM_AND_CHECKS');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_IMPORT_ENTRY_DETAILS', 'Import Entry Details', @ms_germplasm_and_checks_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_IMPORT_ENTRY_DETAILS');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-13">
		<preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_TREATMENT_FACTORS';
             </sqlCheck>
 		</preConditions>
        <comment>Add Treatment Factors permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @mg_studies_permission_id = (SELECT permission_id FROM permission WHERE name = 'MANAGE_STUDIES');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_TREATMENT_FACTORS', 'Treatment Factors', @mg_studies_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_TREATMENT_FACTORS');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-14">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_VIEW_TREATMENT_FACTORS';
             </sqlCheck>
 		</preConditions>
		<comment>View Treatment Factors permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @ms_treatment_factors_id = (SELECT permission_id FROM permission WHERE name = 'MS_TREATMENT_FACTORS');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_VIEW_TREATMENT_FACTORS', 'View Treatment Factors', @ms_treatment_factors_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_VIEW_TREATMENT_FACTORS');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-15">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_ADD_TREATMENT_FACTORS_VARIABLES';
             </sqlCheck>
 		</preConditions>
		<comment>Add Treatment Factors Variables permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @ms_treatment_factors_id = (SELECT permission_id FROM permission WHERE name = 'MS_TREATMENT_FACTORS');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_ADD_TREATMENT_FACTORS_VARIABLES', 'Add Treatment Factors Variables', @ms_treatment_factors_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_ADD_TREATMENT_FACTORS_VARIABLES');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-16">
		<preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_EXPERIMENTAL_DESIGN';
             </sqlCheck>
 		</preConditions>
        <comment>Add Experimental Design permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @mg_studies_permission_id = (SELECT permission_id FROM permission WHERE name = 'MANAGE_STUDIES');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_EXPERIMENTAL_DESIGN', 'Experimental Design', @mg_studies_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_EXPERIMENTAL_DESIGN');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-17">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_VIEW_EXPERIMENTAL_DESIGN';
             </sqlCheck>
 		</preConditions>
		<comment>View Experimental Design permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @ms_experimental_design_id = (SELECT permission_id FROM permission WHERE name = 'MS_EXPERIMENTAL_DESIGN');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_VIEW_EXPERIMENTAL_DESIGN', 'View Experimental Design', @ms_experimental_design_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_VIEW_EXPERIMENTAL_DESIGN');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-18">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_GENERATE_EXPERIMENTAL_DESIGN';
             </sqlCheck>
 		</preConditions>
		<comment>Generate Experimental Design permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @ms_experimental_design_id = (SELECT permission_id FROM permission WHERE name = 'MS_EXPERIMENTAL_DESIGN');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_GENERATE_EXPERIMENTAL_DESIGN', 'Generate Experimental Design', @ms_experimental_design_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_GENERATE_EXPERIMENTAL_DESIGN');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-19">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_DELETE_EXPERIMENTAL_DESIGN';
             </sqlCheck>
 		</preConditions>
		<comment>Delete Experimental Design permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @ms_experimental_design_id = (SELECT permission_id FROM permission WHERE name = 'MS_EXPERIMENTAL_DESIGN');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_DELETE_EXPERIMENTAL_DESIGN', 'Delete Experimental Design', @ms_experimental_design_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_DELETE_EXPERIMENTAL_DESIGN');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-20">
		<preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_ENVIRONMENT';
             </sqlCheck>
 		</preConditions>
        <comment>Add Environment permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @mg_studies_permission_id = (SELECT permission_id FROM permission WHERE name = 'MANAGE_STUDIES');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_ENVIRONMENT', 'Environments', @mg_studies_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_ENVIRONMENT');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-21">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_VIEW_ENVIRONMENT';
             </sqlCheck>
 		</preConditions>
		<comment>View Environment permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @ms_environment_id = (SELECT permission_id FROM permission WHERE name = 'MS_ENVIRONMENT');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_VIEW_ENVIRONMENT', 'View Environment', @ms_environment_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_VIEW_ENVIRONMENT');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-22">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_ADD_ENVIRONMENTAL_CONDITIONS_VARIABLES';
             </sqlCheck>
 		</preConditions>
		<comment>Add Environmental Conditions Variables permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @ms_environment_id = (SELECT permission_id FROM permission WHERE name = 'MS_ENVIRONMENT');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_ADD_ENVIRONMENTAL_CONDITIONS_VARIABLES', 'Add Environmental Conditions Variables', @ms_environment_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_ADD_ENVIRONMENTAL_CONDITIONS_VARIABLES');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-23">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_ADD_ENVIRONMENT_DETAILS_VARIABLES';
             </sqlCheck>
 		</preConditions>
		<comment>Add Environment Details Variables permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @ms_environment_id = (SELECT permission_id FROM permission WHERE name = 'MS_ENVIRONMENT');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_ADD_ENVIRONMENT_DETAILS_VARIABLES', 'Add Environment Details Variables', @ms_environment_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_ADD_ENVIRONMENT_DETAILS_VARIABLES');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-24">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_MODIFY_ENVIRONMENT_VALUES';
             </sqlCheck>
 		</preConditions>
		<comment>modify Environment Values permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @ms_environment_id = (SELECT permission_id FROM permission WHERE name = 'MS_ENVIRONMENT');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_MODIFY_ENVIRONMENT_VALUES', 'Modify Environment Values', @ms_environment_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_MODIFY_ENVIRONMENT_VALUES');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-25">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_MODIFY_NUMBER_OF_ENVIRONMENT';
             </sqlCheck>
 		</preConditions>
		<comment>Modify Number of Environment permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @ms_environment_id = (SELECT permission_id FROM permission WHERE name = 'MS_ENVIRONMENT');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_MODIFY_NUMBER_OF_ENVIRONMENT', 'Modify Number of Environment', @ms_environment_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_MODIFY_NUMBER_OF_ENVIRONMENT');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-26">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_MANAGE_FILES_ENVIRONMENT';
             </sqlCheck>
 		</preConditions>
		<comment>Manage Files Environment permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @ms_environment_id = (SELECT permission_id FROM permission WHERE name = 'MS_ENVIRONMENT');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_MANAGE_FILES_ENVIRONMENT', 'Manage Files Environment', @ms_environment_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_MANAGE_FILES_ENVIRONMENT');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-27">
		<preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_STUDY_SETTINGS';
             </sqlCheck>
 		</preConditions>
        <comment>Study Settings permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @mg_studies_permission_id = (SELECT permission_id FROM permission WHERE name = 'MANAGE_STUDIES');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_STUDY_SETTINGS', 'Study Settings', @mg_studies_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_STUDY_SETTINGS');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-28">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_VIEW_STUDY_SETTINGS';
             </sqlCheck>
 		</preConditions>
		<comment>View Settings permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @ms_study_settings = (SELECT permission_id FROM permission WHERE name = 'MS_STUDY_SETTINGS');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_VIEW_STUDY_SETTINGS', 'View Study Settings', @ms_study_settings);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_VIEW_STUDY_SETTINGS');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-29">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_ADD_STUDY_SETTINGS_VARIABLES';
             </sqlCheck>
 		</preConditions>
		<comment>Add Settings Variables permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @ms_study_settings = (SELECT permission_id FROM permission WHERE name = 'MS_STUDY_SETTINGS');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_ADD_STUDY_SETTINGS_VARIABLES', 'Add Study Settings Variables', @ms_study_settings);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_ADD_STUDY_SETTINGS_VARIABLES');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-30">
		<preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_CROSSES_AND_SELECTIONS';
             </sqlCheck>
 		</preConditions>
        <comment>Add Crosses and Selections permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @mg_studies_permission_id = (SELECT permission_id FROM permission WHERE name = 'MANAGE_STUDIES');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_CROSSES_AND_SELECTIONS', 'Crosses and Selections', @mg_studies_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_CROSSES_AND_SELECTIONS');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-31">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_VIEW_CROSSES_AND_SELECTIONS';
             </sqlCheck>
 		</preConditions>
		<comment>View Crosses and Selections permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @mg_crosses_and_selections_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_CROSSES_AND_SELECTIONS');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_VIEW_CROSSES_AND_SELECTIONS', 'View Crosses and Selections', @mg_crosses_and_selections_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_VIEW_CROSSES_AND_SELECTIONS');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-32">
		<preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_INVENTORY';
             </sqlCheck>
 		</preConditions>
        <comment>Add Study Inventory permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @mg_studies_permission_id = (SELECT permission_id FROM permission WHERE name = 'MANAGE_STUDIES');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_INVENTORY', 'Inventory', @mg_studies_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_INVENTORY');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-33">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_VIEW_INVENTORY';
             </sqlCheck>
 		</preConditions>
		<comment>View Study Inventory permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @mg_inventory_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_INVENTORY');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_VIEW_INVENTORY', 'View Inventory', @mg_inventory_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_VIEW_INVENTORY');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-34">
		<preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_SAMPLE_LIST';
             </sqlCheck>
 		</preConditions>
        <comment>Study Sample List permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @mg_studies_permission_id = (SELECT permission_id FROM permission WHERE name = 'MANAGE_STUDIES');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_SAMPLE_LIST', 'Sample List', @mg_studies_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_SAMPLE_LIST');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-35">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_VIEW_SAMPLE_LIST';
             </sqlCheck>
 		</preConditions>
		<comment>View Sample List permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @mg_sample_list_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_SAMPLE_LIST');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_VIEW_SAMPLE_LIST', 'View Sample List', @mg_sample_list_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_VIEW_SAMPLE_LIST');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-36">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_EXPORT_SAMPLE_LIST';
             </sqlCheck>
 		</preConditions>
		<comment>Export Sample List permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @mg_sample_list_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_SAMPLE_LIST');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_EXPORT_SAMPLE_LIST', 'Export Sample List', @mg_sample_list_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_EXPORT_SAMPLE_LIST');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-37">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_DELETE_SAMPLES';
             </sqlCheck>
 		</preConditions>
		<comment>Delete Samples permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @mg_sample_list_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_SAMPLE_LIST');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_DELETE_SAMPLES', 'Delete Samples', @mg_sample_list_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_DELETE_SAMPLES');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-38">
		<preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_SSA_RESULTS';
             </sqlCheck>
 		</preConditions>
        <comment>SSA Results permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @mg_studies_permission_id = (SELECT permission_id FROM permission WHERE name = 'MANAGE_STUDIES');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_SSA_RESULTS', 'SSA Results', @mg_studies_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_SSA_RESULTS');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-39">
		<preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_VIEW_SSA_RESULTS';
             </sqlCheck>
 		</preConditions>
        <comment>View SSA Results permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @ssa_results_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_SSA_RESULTS');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_VIEW_SSA_RESULTS', 'View SSA Results', @ssa_results_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_VIEW_SSA_RESULTS');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-40">
		<preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_SSA_SUMMARY_STATISTICS';
             </sqlCheck>
 		</preConditions>
        <comment>Summary Statistics permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @ssa_results_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_SSA_RESULTS');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_SSA_SUMMARY_STATISTICS', 'Summary Statistics', @ssa_results_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_SSA_SUMMARY_STATISTICS');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-41">
		<preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_SSA_MEANS_BLUE';
             </sqlCheck>
 		</preConditions>
        <comment>Means (BLUES) permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @ssa_results_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_SSA_RESULTS');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_SSA_MEANS_BLUE', 'Means (BLUES)', @ssa_results_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_SSA_MEANS_BLUE');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-42">
		<preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_OBSERVATIONS';
             </sqlCheck>
 		</preConditions>
        <comment>Observations permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @mg_studies_permission_id = (SELECT permission_id FROM permission WHERE name = 'MANAGE_STUDIES');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_OBSERVATIONS', 'Observations', @mg_studies_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_OBSERVATIONS');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-43">
		<preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_VIEW_OBSERVATIONS';
             </sqlCheck>
 		</preConditions>
        <comment>View Observations permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @observation_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_OBSERVATIONS');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_VIEW_OBSERVATIONS', 'View Observations', @observation_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_VIEW_OBSERVATIONS');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-44">
		<preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_ADD_OBSERVATION_TRAIT_VARIABLES';
             </sqlCheck>
 		</preConditions>
        <comment>Add trait variables permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @observation_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_OBSERVATIONS');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_ADD_OBSERVATION_TRAIT_VARIABLES', 'Add trait variables', @observation_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_ADD_OBSERVATION_TRAIT_VARIABLES');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-45">
		<preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_ADD_OBSERVATION_SELECTION_VARIABLES';
             </sqlCheck>
 		</preConditions>
        <comment>Add Selection variables permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @observation_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_OBSERVATIONS');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_ADD_OBSERVATION_SELECTION_VARIABLES', 'Add Selection variables', @observation_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_ADD_OBSERVATION_SELECTION_VARIABLES');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>


	<changeSet author="cuenyad" id="v23.2.0-46">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_MANAGE_PENDING_OBSERVATIONS';
             </sqlCheck>
 		</preConditions>
		<comment>Manage pending observations permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @observation_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_OBSERVATIONS');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_MANAGE_PENDING_OBSERVATIONS', 'Manage pending observations', @observation_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_MANAGE_PENDING_OBSERVATIONS');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-47">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_MANAGE_CONFIRMED_OBSERVATIONS';
             </sqlCheck>
 		</preConditions>
		<comment>Manage confirmed observations permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @observation_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_OBSERVATIONS');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_MANAGE_CONFIRMED_OBSERVATIONS', 'Manage confirmed observations', @observation_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_MANAGE_CONFIRMED_OBSERVATIONS');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-48">
         <preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_ACCEPT_PENDING_OBSERVATION';
             </sqlCheck>
 		</preConditions>
		<comment>Accept pending observations permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @observation_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_OBSERVATIONS');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_ACCEPT_PENDING_OBSERVATION', 'Accept pending observations', @observation_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_ACCEPT_PENDING_OBSERVATION');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-49">
		<preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_STUDY_ACTIONS';
             </sqlCheck>
 		</preConditions>
        <comment>Study Actions permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @mg_studies_permission_id = (SELECT permission_id FROM permission WHERE name = 'MANAGE_STUDIES');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_STUDY_ACTIONS', 'Study Actions', @mg_studies_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_STUDY_ACTIONS');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-50">
		<preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="1">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_CREATE_LOTS' AND
                                                         P.PARENT_ID = ( SELECT PERMISSION_ID FROM PERMISSION WHERE NAME = 'MANAGE_STUDIES');
             </sqlCheck>
 		</preConditions>
        <comment>Update the parent id of MS_CREATE_LOTS by MS_STUDY_ACTIONS permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @ms_study_Actions_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_STUDY_ACTIONS');
			SET @mg_create_lots_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_CREATE_LOTS');
			update permission set parent_id = @ms_study_Actions_permission_id where permission_id = @mg_create_lots_permission_id
 		</sql>
 	</changeSet>


	<changeSet author="cuenyad" id="v23.2.0-51">
		<preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="1">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_MANAGE_OBSERVATION_UNITS' AND
						 P.PARENT_ID = ( SELECT PERMISSION_ID FROM PERMISSION WHERE NAME = 'MANAGE_STUDIES');
             </sqlCheck>
 		</preConditions>
        <comment>Update the parent id of MS_MANAGE_OBSERVATION_UNITS by MS_STUDY_ACTIONS permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @ms_study_Actions_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_STUDY_ACTIONS');
			SET @mg_observation_units_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_MANAGE_OBSERVATION_UNITS');
			update permission set parent_id = @ms_study_Actions_permission_id where permission_id = @mg_observation_units_permission_id
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-52">
		<preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_CREATE_GENOTYPING_SAMPLES';
             </sqlCheck>
 		</preConditions>
        <comment>Create Genotyping Samples permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @ms_study_Actions_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_STUDY_ACTIONS');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_CREATE_GENOTYPING_SAMPLES', 'Create Genotyping Samples', @ms_study_Actions_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_CREATE_GENOTYPING_SAMPLES');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-53">
		<preConditions onFail="MARK_RAN">
 			<sqlCheck expectedResult="0">
                 SELECT COUNT(*) FROM PERMISSION P WHERE P.NAME = 'MS_EXECUTE_CALCULATED_VARIABLES';
             </sqlCheck>
 		</preConditions>
        <comment>Exectute calculated variables permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @ms_study_Actions_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_STUDY_ACTIONS');

			INSERT INTO permission (`name`, `description`, `parent_id`) VALUES ('MS_EXECUTE_CALCULATED_VARIABLES', 'Exectute calculated variables', @ms_study_Actions_permission_id);

			SET @permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_EXECUTE_CALCULATED_VARIABLES');

			insert into role_type_permission(role_type_id, permission_id, selectable) values (1, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (2, @permission_id , 1);
			insert into role_type_permission(role_type_id, permission_id, selectable) values (3, @permission_id , 1);
 		</sql>
 	</changeSet>

	<changeSet author="cuenyad" id="v23.2.0-54">
         <preConditions onFail="MARK_RAN">
			<and>
            	<sqlCheck expectedResult="0">
                	SELECT count(*) > 1 FROM role_permission rp INNER JOIN permission p ON rp.permission_id = p.permission_id
					WHERE p.name IN ('CREATE_STUDIES', 'CLOSE_STUDY', 'DELETE_STUDY', 'LOCK_STUDY', 'MS_GERMPLASM_AND_CHECKS',
									 'MS_TREATMENT_FACTORS', 'MS_EXPERIMENTAL_DESIGN', 'MS_ENVIRONMENT', 'MS_STUDY_SETTINGS',
									 'MS_CROSSES_AND_SELECTIONS', 'MS_INVENTORY', 'MS_SAMPLE_LIST'
									 'MS_SSA_RESULTS' ,'MS_OBSERVATIONS');
            	</sqlCheck>
				<not>
					<tableExists tableName="roles_affected_temporary"></tableExists>
				</not>
			</and>
 		</preConditions>
		<comment>Adding new granular studies permissions in role_permission</comment>
 		<sql dbms="mysql" splitStatements="true">
			SET @create_studies_permission_id = (SELECT permission_id FROM permission WHERE name = 'CREATE_STUDIES');
			SET @close_study_permission_id = (SELECT permission_id FROM permission WHERE name = 'CLOSE_STUDY');
			SET @delete_study_permission_id = (SELECT permission_id FROM permission WHERE name = 'DELETE_STUDY');
			SET @lock_study_permission_id = (SELECT permission_id FROM permission WHERE name = 'LOCK_STUDY');
			SET @ms_germplasm_and_checks_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_GERMPLASM_AND_CHECKS');
			SET @treatment_factors_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_TREATMENT_FACTORS');
			SET @experimental_design_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_EXPERIMENTAL_DESIGN');
			SET @environment_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_ENVIRONMENT');
			SET @study_settings_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_STUDY_SETTINGS');
			SET @crosses_and_selections_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_CROSSES_AND_SELECTIONS');
			SET @study_inventory_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_INVENTORY');
			SET @study_sample_list_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_SAMPLE_LIST');
			SET @single_site_results_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_SSA_RESULTS');
			SET @observation_permission_id = (SELECT permission_id FROM permission WHERE name = 'MS_OBSERVATIONS');


			#Create roles_affected_temporary Table
			CREATE TEMPORARY TABLE roles_affected_temporary (
				role_id int(11) not null
			);

			#Insert role id in Temporary table
			INSERT INTO roles_affected_temporary (role_id)
			SELECT DISTINCT(rp.role_id) FROM role_permission rp INNER JOIN  permission p ON rp.permission_id = p.permission_id
			WHERE p.name IN ('MS_MANAGE_OBSERVATION_UNITS','MS_WITHDRAW_INVENTORY',
							 'MS_CREATE_PENDING_WITHDRAWALS','MS_CREATE_CONFIRMED_WITHDRAWALS',
							 'MS_CANCEL_PENDING_TRANSACTIONS','MS_MANAGE_FILES','MS_CREATE_LOTS')
			GROUP BY rp.role_id;

			#Insert permissions in role_permission
			INSERT INTO role_permission(role_id, permission_id)
			SELECT rp.role_id, @create_studies_permission_id FROM roles_affected_temporary rp;

			INSERT INTO role_permission(role_id, permission_id)
			SELECT rp.role_id, @close_study_permission_id FROM roles_affected_temporary rp;

			INSERT INTO role_permission(role_id, permission_id)
			SELECT rp.role_id, @delete_study_permission_id FROM roles_affected_temporary rp;

			INSERT INTO role_permission(role_id, permission_id)
			SELECT rp.role_id, @lock_study_permission_id FROM roles_affected_temporary rp;

			INSERT INTO role_permission(role_id, permission_id)
			SELECT rp.role_id, @ms_germplasm_and_checks_permission_id FROM roles_affected_temporary rp;

			INSERT INTO role_permission(role_id, permission_id)
			SELECT rp.role_id, @treatment_factors_permission_id FROM roles_affected_temporary rp;

			INSERT INTO role_permission(role_id, permission_id)
			SELECT rp.role_id, @experimental_design_permission_id FROM roles_affected_temporary rp;

			INSERT INTO role_permission(role_id, permission_id)
			SELECT rp.role_id, @environment_permission_id FROM roles_affected_temporary rp;

			INSERT INTO role_permission(role_id, permission_id)
			SELECT rp.role_id, @study_settings_permission_id FROM roles_affected_temporary rp;

			INSERT INTO role_permission(role_id, permission_id)
			SELECT rp.role_id, @crosses_and_selections_permission_id FROM roles_affected_temporary rp;

			INSERT INTO role_permission(role_id, permission_id)
			SELECT rp.role_id, @study_inventory_permission_id FROM roles_affected_temporary rp;

			INSERT INTO role_permission(role_id, permission_id)
			SELECT rp.role_id, @study_sample_list_permission_id FROM roles_affected_temporary rp;

			INSERT INTO role_permission(role_id, permission_id)
			SELECT rp.role_id, @single_site_results_permission_id FROM roles_affected_temporary rp;

			INSERT INTO role_permission(role_id, permission_id)
			SELECT rp.role_id, @observation_permission_id FROM roles_affected_temporary rp;

			#Delete roles_affected_temporary Table
			DROP TABLE roles_affected_temporary;

 		</sql>
 	</changeSet>
</databaseChangeLog>
