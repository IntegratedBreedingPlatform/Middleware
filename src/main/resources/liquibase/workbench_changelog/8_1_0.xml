<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
		http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd
		http://www.liquibase.org/xml/ns/dbchangelog-ext
		http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">
	
	<!-- Cannot drop workbench_project_user_role table because it is being used by "beta16-1" Liquibase script.
		 Dropping the table causes a Liquibase error for new crops hence we just empty the table with the script below.
	 -->
	<changeSet author="darla" id="v8.1.0-1">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="1">
				SELECT COUNT(*) FROM workbench_project_user_role;
			</sqlCheck>
		</preConditions>
		<sql dbms="mysql" splitStatements="true">
			DELETE FROM workbench_project_user_role;
		</sql>
	</changeSet>
	
	<changeSet author="darla" id="v8.1.0-2">
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="workbench_role"/>
		</preConditions>
		<dropTable cascadeConstraints="true"  tableName="workbench_role"/>
	</changeSet>
	
	<changeSet author="darla" id="v8.1.0-3">
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="workbench_project_workflow_step"/>
		</preConditions>
		<dropTable cascadeConstraints="true"  tableName="workbench_project_workflow_step"/>
	</changeSet>
	
	<changeSet author="darla" id="v8.1.0-4">
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="workbench_workflow_step_tool"/>
		</preConditions>
		<dropTable cascadeConstraints="true"  tableName="workbench_workflow_step_tool"/>
	</changeSet>
	
	<changeSet author="darla" id="v8.1.0-5">
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="workbench_workflow_step"/>
		</preConditions>
		<dropTable cascadeConstraints="true"  tableName="workbench_workflow_step"/>
	</changeSet>
	
	<changeSet author="darla" id="v8.1.0-6">
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="workbench_workflow_template_step"/>
		</preConditions>
		<dropTable cascadeConstraints="true"  tableName="workbench_workflow_template_step"/>
	</changeSet>
	
	<changeSet author="darla" id="v8.1.0-7">
		<preConditions onFail="MARK_RAN">
			<tableExists tableName="workbench_workflow_template"/>
		</preConditions>
		<dropTable cascadeConstraints="true"  tableName="workbench_workflow_template"/>
	</changeSet>
	
	
</databaseChangeLog>
